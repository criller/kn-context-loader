# kn-context-loader 核心设计目标

## 1. 核心使命：为 Agent 提供高质量的上下文弹药

`kn-context-loader` 的根本目的不是直接回答用户的查询，而是为 Agent（大语言模型）提供高质量、高相关性的“上下文弹药”，使其能够基于企业内部的私有知识进行准确、可靠的回复。

## 2. 三大核心目标

### 2.1 克服大模型的“知识局限性”与“幻觉”问题

- **问题**: 通用大模型（LLM）不具备企业内部的、私有的、结构化的业务知识，直接回答相关问题时容易出现“不知道”或“幻觉”现象。
- **Loader 的作用**: 充当**事实的搬运工**。将用户问题相关的确定性知识（概念、实例、关系）从业务知识网络（BKN）中提取出来，作为“背景材料”提供给 Agent，确保其回答基于事实。

### 2.2 弥合“用户自然语言”与“结构化知识”之间的鸿沟

- **问题**: 用户使用模糊、多变的自然语言，而知识网络是高度结构化、精确定义的。两者之间存在巨大的语义鸿沟。
- **Loader 的作用**: 充当**结构化执行器/查询编排器**。在 Agent 完成意图理解与计划制定之后，Loader 接收来自 Agent 的结构化指令，映射到业务知识网络中的对象类与关系，并调用既有接口执行查询与数据整形；Loader 不承担意图理解职责。

### 2.3 解决大模型“上下文窗口”的限制

- **问题**: Agent 的上下文窗口有限，无法容纳整个知识网络。
- **Loader 的作用**: 充当**高效的过滤器**。它的核心挑战在于，针对每一个用户问题，动态地从庞大的知识网络中，提取出一个**“最小且完备”的上下文子集**。
    - **最小**: 只包含与当前问题最相关的信息，避免无关信息干扰，降低 Token 消耗。
    - **完备**: 包含足够的信息，让 Agent 能够完整地回答问题，而不需要再次追问或猜测。

## 3. 工作流示例：以“头晕吃啥药”为例

1.  **接收查询**: 接收到用户查询：“最近总头晕，吃什么药好？”
2.  **定位与提取 (Loader 的核心工作)**:
    - **定位入口**: 识别核心词“头晕”，在 BKN 中定位到其为 `symptom`（症状）实例。
    - **扩展关联**: 沿着知识网络的边进行扩展，发现“头晕”关联到 `disease`（疾病）实例，如“高血压”和“颈椎病”。
    - **继续扩展**: 沿着“高血压”的路径，找到关联的 `drug`（药物）实例，如“硝苯地平”。
    - **打包上下文**: 将整个“推理链条”上的相关信息（实例、概念定义）打包成结构化的上下文。
3.  **输出给 Agent**: Loader 的输出**不是答案**，而是包含了事实依据的上下文，供 Agent 参考。
4.  **Agent 生成答案**: Agent 基于获取的上下文，生成一个既准确又自然的回答，并可能附带免责声明（如“请咨询专业医生”）。

## 4. 结论

`kn-context-loader` 的本质是一个**“问题驱动的知识网络子图提取器”**。其设计的成功与否，取决于它能否为 Agent **精准、高效地准备好解决问题所需的那一小块“知识拼图”**。