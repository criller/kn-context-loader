# 场景：集合运算与比对（Set / Compare）【M2】

目标（聚焦用户与业务）
- 对邻居集合进行交集/并集/差集与相似度比对，回答“有哪些共同关联/差异/最相似”等问题。

用户故事（化工示例，可替换为你们领域）
- ST-001 企业共同专利
  - “企业A与企业B共同关联的专利有哪些？”
  - 按TBox的关系路径：enterprise → patent（enterprise_2_patent，正向，一跳）；对两家企业的专利邻居集合做交集
  - 期望：返回共同关联的专利列表。
- ST-002 物料共同反应
  - “乙醇与甲醇共同参与的反应有哪些？”
  - 按TBox的关系路径：material → reaction（material_2_reaction，正向，一跳）；对两种物料的反应邻居集合做交集
  - 期望：返回共同参与的反应列表。
- ST-003 园区企业比对
  - “企业A与企业B是否在相同园区吗？”
  - 按TBox的关系路径：enterprise → park（enterprise_2_park，正向，一跳）；对两家企业的园区邻居集合做交集/是否非空
  - 期望：返回相同园区或差异园区的判断与列表。
- ST-004 邻居差集
  - “企业A有而企业B没有的生产物料有哪些？”
  - 按TBox的关系路径：enterprise → material（enterprise_2_material，正向，一跳）；计算 A 的邻居差集（A−B）
  - 期望：返回差异集合。
- ST-005 相似度Top-K
  - “与企业A在专利关联上最相似的企业Top-5有哪些？”
  - 按TBox的关系路径：enterprise → patent（enterprise_2_patent，正向，一跳）；按邻居集合相似度（例如Jaccard）排序取Top-K
  - 期望：返回相似企业与相似度分数。

基础能力（文本版）
- 能获取指定对象的邻居集合并进行集合运算（交并差）；
- 能计算集合相似度并进行排序（如Jaccard/重叠系数等）；
- 支持结果规模限制与守护（limit）。

注意事项
- 确认集合的构造口径（按边类型、方向（正向/反向/双向，默认正向）、是否去重等）；
- 若关系基数为多对多，建议邻居集合按实体id去重；必要时在统计/相似度计算前进行去重；
- 如需按业务键构造集合（非id），请明确连接字段（join_fields）与策略（join_strategy），避免混淆；
- 对并集/差集规模进行限制，避免过大结果；
- 相似度计算需说明方法与边界（文本版）。