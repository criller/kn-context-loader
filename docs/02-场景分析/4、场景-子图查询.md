# 场景：子图查询（Neighborhood / Expand）

目标（聚焦用户与业务）
- 以一个或多个种子实体为中心，按关系类型、方向与深度进行邻域扩展，返回本地子图（节点/边）。
- 用于理解实体的关联关系与上下文，支撑进一步分析与判断。

用户故事（化工示例，可替换为你们领域）
- SG-001 企业的园区/专利/物料
  - “企业A在哪个园区、专利和生产的物料有哪些？”
  - 按TBox的关系路径：
    - enterprise → park（enterprise_2_park，正向，一跳）
    - enterprise → patent（enterprise_2_patent，正向，一跳）
    - enterprise → material（enterprise_2_material，正向，一跳）
  - 期望：返回企业A的一跳邻域（园区、专利、物料）及相应关系。
- SG-002 物料的反应与工艺
  - “乙醇参与了哪些反应？在什么工艺中被消耗？”
  - 按TBox的关系路径：
    - material → reaction（material_2_reaction，正向，一跳）
    - reaction → material（reaction_2_material，正向，一跳，用于查看产物）
    - material → process（material_2_process，正向，一跳，用于查看被消耗的工艺）
  - 期望：返回物料到反应/工艺的关联关系与节点。
- SG-003 限定深度的多跳扩展
  - “从企业A出发，查看与其相关的园区、专利、物料和反应的关系网络，不要展开过远（只看直接关联及其再一层）”
  - 按TBox的关系路径（示例）：
    - enterprise → material（enterprise_2_material，正向，一跳） → reaction（material_2_reaction，正向，二跳）
    - enterprise → patent（enterprise_2_patent，正向，一跳）
    - enterprise → park（enterprise_2_park，正向，一跳）
  - 期望：返回限制类型与深度的局部网络结构。
- SG-004 方向与过滤
  - “只看企业A对外发生的关联，不包含指向企业A的关系；并排除已失效的专利”
  - 按TBox的关系路径：
    - enterprise → patent（enterprise_2_patent，正向，一跳），并在节点属性中过滤 patent.status ≠ 失效
  - 期望：返回满足方向与属性过滤条件的子图。
- SG-005 反向邻域：园区的入向企业
  - “园区B中有哪些企业？”
  - 按TBox的关系路径：
    - park ← enterprise（enterprise_2_park，反向，一跳）
  - 期望：返回园区B的一跳入向邻域（企业）及相应关系。
- SG-006 反向邻域：专利的拥有者
  - “专利P001由哪些企业拥有？”
  - 按TBox的关系路径：
    - patent ← enterprise（enterprise_2_patent，反向，一跳）
  - 期望：返回专利P001的一跳入向邻域（企业）及相应关系。
- SG-007 反向与属性过滤
  - “从物料‘乙醇’出发，只查看被生产的入向企业，且企业状态=在营”
  - 按TBox的关系路径：
    - material ← enterprise（enterprise_2_material，反向，一跳）
  - 期望：返回满足方向与企业状态过滤的子图。

基础能力（文本版）
- 支持以种子实体进行邻域扩展；
- 支持关系类型过滤、方向控制（正向/反向/双向，默认双向）、深度限制；
- 支持对对象（节点）属性过滤（如状态、日期范围等）；暂不支持边属性过滤；
- 支持结果规模限制与守护（limit、max_nodes/max_edges），并可进行降级说明；
- 能以节点/边清单形式返回子图结构。

注意事项
- 深度与规模需受控，避免结果爆炸；
- 关系与类型的选择与过滤要清晰，以便用户理解返回结构。