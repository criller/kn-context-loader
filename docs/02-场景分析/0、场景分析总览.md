# 统一检索——场景分析总览

目的
- 聚焦“业务知识网络”的真实用户故事与场景梳理，不涉及方案设计或接口设计细节。
- 提炼各场景所需的基础能力（文本版），为后续接口方案与实现提供输入。

适用范围与TBox参考
- 范围：面向业务知识网络的实体与关系检索、邻域扩展、关系/路径、属性获取、统计聚合、澄清与混合模式。
- TBox参考：02-概念约定/kn_tbox.json（通用结构）、kn_tbox_example.json（化工示例）。示例对象类型：企业、园区、专利、物质物料、化学反应、工艺。示例关系：坐落在、拥有专利、生产物料、参与反应、产物、参与消耗。

场景分类与里程碑优先级
- M1（原型阶段，必须覆盖）
  1) 实例检索：按名称/别名/类型/属性筛选找到对象
  2) 属性获取（对象的属性值；暂不支持边属性）
  3) 子图查询：围绕种子实体按关系类型与方向（正向/反向/双向）/深度扩展
  4) 关系确认（一跳）：确认A是否与B存在某种关系
  5) 澄清（Clarify）：歧义或能力边界时的澄清与建议
  6) 混合模式（Hybrid）：NL中嵌入结构化限定
- M2（增强阶段，规划但可延后）
  1) 路径查询（Path）：多跳约束路径、最短路径
  2) 聚合与统计（Aggregate）：计数、分组、Top-K
  3) 集合运算与比对（Set/Compare）：邻居交并差与相似度
  4)  文本检索/RAG（Texts）：实体相关文本的检索与问答

基础能力（文本版，详见《基础能力说明.md》）
- 实例检索、子图查询、关系确认、属性获取、澄清与混合模式（M1）
- 路径查询、聚合与统计、集合运算、RAG（M2）

示例覆盖矩阵（化工TBox）
- 企业：按名称/地址检索；企业→园区/专利/物料邻域；确认“坐落在”或“拥有专利”关系；获取地址/简介属性。
- 专利：按专利号/标题/状态/IPC检索；专利与企业关联；获取申请/授权日期、摘要属性。
- 物质物料：按名称/CAS/危化品类别检索；物料↔反应、物料→工艺邻域；获取化学式、储存要求属性。
- 园区/反应/工艺：按名称/类型检索与邻域扩展。

澄清（Clarify）与注意事项
- 触发：歧义、低置信、多候选、能力缺失、参数异常。
- 建议项：对象类型、关系类型、方向（正向/反向/双向）、深度、连接键（id/业务键）、状态、日期、limit。
- 注意：控制结果规模（limit/depth）；支持别名与术语归一；保持透明的澄清过程（本文件不涉及实现细节）。

后续工作
- 逐项评审各场景文档（实例检索、子图、关系与路径、属性、聚合、澄清、混合），补充你们领域的真实TBox对象/关系与用例。
- 为TBox关系类型补充连接策略/字段与基数（join_strategy/source_join_fields/target_join_fields/cardinality），并在场景中约定去重策略。
- 基于场景与基础能力，再推进接口方案设计（单独文档）。