# 场景用例表（基于当前场景分析）

说明
- 面向真实业务问题的用例集合，问题采取业务语言表达；技术译法与期望输出用于实现落地与验收。
- 能力阶段标注：M1（原型阶段必须覆盖）、M2（增强阶段可延后）。
- 默认方向策略：双向（both）；如需限制方向或层级，在技术译法中明确，不放在用户问题中。

---

## 实例检索（M1）
- SC-001 企业名称检索
  - 业务问题：查找名称包含“化工”的企业
  - 技术译法（摘要）：concept=enterprise；filters.name contains "化工"；limit
  - 期望输出：企业列表及基础信息（名称、类型、地址、简介等）
  - 备注：同名较多时提示进一步限定（对象类型、地域等）
- SC-002 园区检索
  - 业务问题：有哪些名字里带“开发区”的园区？
  - 技术译法（摘要）：concept=park；filters.name contains "开发区"
  - 期望输出：园区列表及名称、地址等信息
- SC-003 专利号/标题检索
  - 业务问题：专利号为“CN1234567”的是哪条？或标题含“乙醇”的专利
  - 技术译法（摘要）：concept=patent；filters.patent_no=CN1234567 或 filters.title contains "乙醇"
  - 期望输出：编号、标题、状态、IPC、日期、摘要等
- SC-004 物质物料属性检索
  - 业务问题：CAS号是 64-17-5 的物质是什么？或危化品类别为易燃液体的物料有哪些？
  - 技术译法（摘要）：concept=material；filters.cas=64-17-5 或 filters.hazard_class="易燃液体"
  - 期望输出：名称、CAS、化学式、危化品类别、储存要求等
- SC-005 反应与工艺检索
  - 业务问题：有无名为“酯化反应”的反应？或查找包含“精馏塔”设备的工艺
  - 技术译法（摘要）：concept=reaction/process；filters.name contains 或 filters.devices contains "精馏塔"
  - 期望输出：名称、描述、关键属性

---

## 子图查询（M1）
- SG-001 企业的园区/专利/物料
  - 业务问题：企业A在哪个园区、专利和生产的物料有哪些？
  - 技术译法（摘要）：seed=enterprise:A；relation_types=[enterprise_2_park, enterprise_2_patent, enterprise_2_material]；direction=out；depth=1
  - 期望输出：企业A的一跳邻域（园区、专利、物料）及相应关系
- SG-002 物料的反应与工艺
  - 业务问题：乙醇参与了哪些反应？在什么工艺中被消耗？
  - 技术译法（摘要）：seed=material:乙醇；relation_types=[material_2_reaction, reaction_2_material, material_2_process]；direction=out；depth=1
  - 期望输出：物料到反应/工艺的关联关系与节点
- SG-003 限定深度的多跳扩展
  - 业务问题：从企业A出发，查看与其相关的园区、专利、物料和反应的关系网络，不要展开过远（只看直接关联及其再一层）
  - 技术译法（摘要）：seed=enterprise:A；允许 relation_types 筛选；direction=out；depth=2；limit 控制规模
  - 期望输出：限制类型与深度的局部网络结构
- SG-004 方向与过滤
  - 业务问题：只看企业A对外发生的关联，不包含指向企业A的关系；并排除已失效的专利
  - 技术译法（摘要）：seed=enterprise:A；relation_types=[enterprise_2_patent]；direction=out；node_filter: patent.status≠失效
  - 期望输出：满足方向与属性过滤条件的子图
- SG-005 反向邻域：园区的入向企业
  - 业务问题：园区B中有哪些企业？
  - 技术译法（摘要）：seed=park:B；relation_types=[enterprise_2_park]；direction=in；depth=1
  - 期望输出：园区B的一跳入向邻域（企业）及相应关系
- SG-006 反向邻域：专利的拥有者
  - 业务问题：专利P001由哪些企业拥有？
  - 技术译法（摘要）：seed=patent:P001；relation_types=[enterprise_2_patent]；direction=in；depth=1
  - 期望输出：专利的一跳入向邻域（企业）及相应关系
- SG-007 反向与属性过滤
  - 业务问题：从物料“乙醇”出发，只查看被生产的入向企业，且企业状态=在营
  - 技术译法（摘要）：seed=material:乙醇；relation_types=[enterprise_2_material]；direction=in；node_filter: enterprise.status=在营
  - 期望输出：满足方向与企业状态过滤的子图

---

## 关系与路径查询（M1/M2）
- RP-001 企业与园区的关系（M1）
  - 业务问题：企业A是否坐落在园区B？
  - 技术译法（摘要）：relation_types=[enterprise_2_park]；direction=out；depth=1；target=park:B
  - 期望输出：若存在该边，返回边与节点；否则说明不存在
- RP-002 企业与专利关系（M1）
  - 业务问题：企业A是否拥有专利P001？
  - 技术译法（摘要）：relation_types=[enterprise_2_patent]；direction=out；depth=1；target=patent:P001
  - 期望输出：返回企业到专利的一跳关系与节点
- RP-003 路径：企业→物料→反应→产物（M2）
  - 业务问题：企业A生产的物料参与了哪些反应，并最终产出哪些物料？请给出一条最短路径
  - 技术译法（摘要）：约束路径类型与长度；默认各跳正向；返回最短或全部匹配路径（受限）
  - 期望输出：符合约束的最短路径或路径集合
- RP-004 反向：园区包含企业（M1）
  - 业务问题：园区B里有哪些企业？
  - 技术译法（摘要）：relation_types=[enterprise_2_park]；direction=in；depth=1
  - 期望输出：与园区B存在入向关系的企业节点与边清单
- RP-005 反向：专利的拥有者（M1）
  - 业务问题：专利P001由哪些企业拥有？
  - 技术译法（摘要）：relation_types=[enterprise_2_patent]；direction=in；depth=1
  - 期望输出：拥有该专利的企业列表与对应边

---

## 属性获取（M1）
- AT-001 企业地址
  - 业务问题：企业A的注册地址是什么？
  - 技术译法（摘要）：concept=enterprise；读取 entity.address
  - 期望输出：address 与相关基础信息
- AT-002 专利状态与日期
  - 业务问题：专利号 CN1234567 的当前状态与授权日期？
  - 技术译法（摘要）：concept=patent；读取 patent.status、grant_date
  - 期望输出：status、grant_date
- AT-003 物料属性
  - 业务问题：乙醇的化学式与储存要求是什么？
  - 技术译法（摘要）：concept=material；读取 material.formula、storage_requirements
  - 期望输出：formula、storage_requirements
- AT-004 关系属性（未来增强，当前暂不支持）
  - 业务问题：若模型支持关系边属性（例如 企业→园区 的时间戳/备注），则可读取相应字段
  - 技术译法（摘要）：读取 edge.properties（待支持）
  - 期望输出：关系边属性；当前为不支持的说明
- 通用备注：当集合由业务键或关系路径构建时，需明确连接键与策略（join_fields/join_strategy，例如 by_id 或 field_equality）；多对多集合的属性读取需定义去重口径（options.dedup_by=id|edge|fields；如按字段值去重需提供 dedup_fields）。

---

## 澄清（Clarify）（M1）
- 触发条件（摘要）：歧义、低置信、多候选、能力缺失、参数异常；连接键未指定或关系基数导致歧义（如多对多是否去重）。
- 建议澄清项：对象类型、关系类型、方向（正/反/双）、深度、连接键（id/业务键）、状态、日期、limit；去重口径（dedup_by=id|edge|fields）。
- 响应透明度：清晰提示默认策略与能力边界；给出替代建议（如先子图扩展再匹配）。

---

## 文本检索 / RAG（M2）
- TX-001 专利摘要检索
  - 业务问题：检索包含“乙醇氧化”的专利摘要
  - 技术译法（摘要）：concept=patent；text_fields=[patent.abstract]；text_query="乙醇氧化"；limit；options.highlight=true
  - 期望输出：匹配的专利与摘要片段（高亮关键词），附编号与标题
- TX-002 工艺说明文本检索
  - 业务问题：查找包含“精馏塔”的工艺说明
  - 技术译法（摘要）：concept=process；text_fields=[process.flow, process.equipment, process.safety_notes]；text_query="精馏塔"；limit
  - 期望输出：匹配工艺及相关说明片段（流程/设备/安全说明）
- TX-003 企业简介/公告
  - 业务问题：企业A的简介和近期公告
  - 技术译法（摘要）：concept=enterprise；text_fields=[enterprise.brief_info, enterprise.news]（示例字段名）；limit
  - 期望输出：企业简介或公告文本片段，附来源字段说明
- TX-004 物料安全说明
  - 业务问题：乙醇的储存要求与安全注意事项
  - 技术译法（摘要）：concept=material；text_fields=[material.storage_requirements]；可选关联 process.safety_notes；limit
  - 期望输出：物料的储存与安全说明片段
- TX-005 反应描述检索
  - 业务问题：与“酯化”相关的反应描述
  - 技术译法（摘要）：concept=reaction；text_fields=[reaction.description, reaction.conditions]；text_query="酯化"；limit
  - 期望输出：反应的描述/条件说明片段

## 聚合与统计（M2）
- AG-001 企业拥有专利数量（分组计数）
  - 业务问题：统计每个企业拥有的专利数量
  - 技术译法（摘要）：seed_set=enterprise*；relation=enterprise_2_patent；direction=out；aggregation=count(patent)；group_by=enterprise.id；options.dedup_by=id
  - 期望输出：enterprise.id/name + patent_count；备注：明确去重按专利实体ID
- AG-002 按状态分组统计（多维分组）
  - 业务问题：按专利状态（有效、失效）统计每个企业的专利数量
  - 技术译法（摘要）：seed_set=enterprise*；relation=enterprise_2_patent；group_by=[enterprise.id, patent.status]；aggregation=count(patent)；options.dedup_by=id
  - 期望输出：enterprise.id/name + patent.status + count
- AG-003 Top-K 企业（排序与限制）
  - 业务问题：拥有专利最多的企业Top-10
  - 技术译法（摘要）：同 AG-001；order_by=patent_count desc；limit=10
  - 期望输出：Top-10 企业及其专利数
- AG-004 字段去重口径示例（避免重复统计）
  - 业务问题：按专利号去重后统计每个企业的专利数量，避免重复记录造成的重复计数
  - 技术译法（摘要）：relation=enterprise_2_patent；aggregation=count(patent)；group_by=enterprise.id；options.dedup_by=fields；options.dedup_fields=["patent_no"]
  - 期望输出：enterprise.id/name + dedup(patent_no) 后的 count

## 集合运算与比对（M2）
- ST-001 共同拥有的专利（交集）
  - 业务问题：企业A和企业B共同拥有的专利有哪些？
  - 技术译法（摘要）：seed=[enterprise:A, enterprise:B]；relation=enterprise_2_patent；direction=out；set_op=intersection；options.dedup_by=id
  - 期望输出：共同专利清单（id、标题、状态等）
- ST-002 邻居差集：A有B没有的物料（差集）
  - 业务问题：企业A生产的物料中，企业B没有生产的有哪些？
  - 技术译法（摘要）：seed=[enterprise:A, enterprise:B]；relation=enterprise_2_material；direction=out；set_op=difference(A−B)；options.dedup_by=id
  - 期望输出：差集物料清单（名称、CAS等）
- ST-003 并集：两企业的园区覆盖（并集）
  - 业务问题：企业A和企业B涉及的园区总集合有哪些？
  - 技术译法（摘要）：seed=[enterprise:A, enterprise:B]；relation=enterprise_2_park；direction=out；set_op=union；options.dedup_by=id
  - 期望输出：园区列表（名称、地址等）
- ST-004 相似度：基于邻居集合（Jaccard）
  - 业务问题：企业A与企业B在专利维度的相似度如何？（以共同拥有专利的比例衡量）
  - 技术译法（摘要）：neighbors_A=patents(A)；neighbors_B=patents(B)；similarity=jaccard=|A∩B|/|A∪B|；options.dedup_by=id
  - 期望输出：相似度分值与必要的集合大小说明
- ST-005 业务键构造集合的比对（需明确连接策略）
  - 业务问题：按企业名称（业务键）匹配两数据源中的企业集合，比较其共同生产的物料
  - 技术译法（摘要）：join_strategy=field_equality；join_fields=["enterprise.name"]；set_op=intersection on material；options.dedup_by=fields；options.dedup_fields=["material.name"]；必要时触发澄清以消除同名歧义
  - 期望输出：共同物料清单及命中规则说明（连接字段与去重字段）

## 混合模式（M1）
- HY-001 企业A的有效专利Top-5（嵌入过滤与排序）
  - 业务问题：列出企业A拥有的、状态为“有效”的专利前5条，并展示标题与授权日期
  - 技术译法（摘要）：seed=enterprise:A；relation_types=[enterprise_2_patent]；direction=out；node_filter: patent.status=有效；order_by=patent.grant_date desc；limit=5
  - 期望输出：专利清单（标题、授权日期、状态等），满足过滤与排序
- HY-002 园区B的在营企业及其物料（嵌入方向与二层扩展、去重）
  - 业务问题：园区B中在营企业有哪些？这些企业生产的物料（不重复）是什么？
  - 技术译法（摘要）：relation_path: park ← enterprise（enterprise_2_park, in, depth=1）→ material（enterprise_2_material, out, depth=2）；node_filter: enterprise.status=在营；options.dedup_by=id（对物料去重）
  - 期望输出：企业列表（在营）及其物料清单（去重后），并附关系说明
- HY-003 检索专利→反向查企业（在营）→企业的园区（嵌入实例筛选与方向约束）
  - 业务问题：找到标题含“乙醇”的专利，查看拥有这些专利的在营企业，以及这些企业所在的园区
  - 技术译法（摘要）：concept=patent；filters.title contains "乙醇"；seed_set=专利集合；relation_path: patent ← enterprise（enterprise_2_patent, in, depth=1）→ park（enterprise_2_park, out, depth=2）；node_filter: enterprise.status=在营；options.dedup_by=id
  - 期望输出：企业与园区清单，满足标题筛选与方向约束
- HY-004 企业集合（名称含“化工”）的对外专利关联与属性返回（嵌入实例筛选与子图限定）
  - 业务问题：检索名称包含“化工”的企业，查看其对外发生的专利关联，并返回每家企业的地址
  - 技术译法（摘要）：concept=enterprise；filters.name contains "化工"；seed_set=企业集合；relation_types=[enterprise_2_patent]；direction=out；depth=1；return_fields=[enterprise.address]
  - 期望输出：企业清单（地址）及其对外的专利关联
- HY-005 业务键混合：按企业名称匹配外部清单→查看近一年更新的工艺（含澄清提示）
  - 业务问题：按企业名称匹配外部清单中的公司，查看这些公司参与的、近一年有更新的工艺，避免同名混淆
  - 技术译法（摘要）：join_strategy=field_equality；join_fields=["enterprise.name"]；seed_set=外部企业清单；relation_types=[enterprise_2_process]；direction=out；node_filter: process.updated_at ≥ now−1y；options.dedup_by=id；必要时触发澄清以消除同名歧义
  - 期望输出：匹配到的企业及其近一年更新的工艺清单，附连接字段与去重策略说明
- HY-006 企业→专利过滤（授权/日期/IPC，返回摘要）
  - 业务问题：查找企业A在2021年后授权的、IPC包含C07D的专利，并返回专利摘要
  - 技术译法（摘要）：seed=enterprise:A；relation_types=[enterprise_2_patent]；direction=out；node_filter: patent.status=授权 AND patent.grant_date>2021-01-01 AND patent.ipc contains "C07D"；return_fields=[patent.abstract]
  - 期望输出：符合过滤条件的专利列表（摘要片段），附授权日期与IPC分类
- HY-007 物料→反应（类型过滤）→产物（限制返回数量）
  - 业务问题：查找乙醇参与的氧化类反应产生的产物，并限制返回前100个
  - 技术译法（摘要）：seed=material:乙醇；relation_path: material → reaction（material_2_reaction, out, depth=1, node_filter: reaction.type=氧化还原）→ material（reaction_2_material, out, depth=1）；limit=100；options.dedup_by=id
  - 期望输出：产物清单（不超过100条），附反应类型过滤说明